router {
    mode: interior
    id: Router.${HOSTNAME}
}

listener {
    host: 0.0.0.0
    port: amqp
    authenticatePeer: no
    saslMechanisms: ANONYMOUS
}

listener {
    host: 0.0.0.0
    port: 5671
    sslProfile: ssl_details
    authenticatePeer: no
    requireSsl: true
}

listener {
    host: 0.0.0.0
    port: 55672
    role: inter-router
    sslProfile: inter_router_tls
    authenticatePeer: no
}

sslProfile {
   name: inter_router_tls
   certFile: /etc/qpid-dispatch-certs/tls.crt
   keyFile: /etc/qpid-dispatch-certs/tls.key
}

sslProfile {
   name: ssl_details
   certFile: /etc/qpid-dispatch-certs/tls.crt
   keyFile: /etc/qpid-dispatch-certs/tls.key
}

address {
    prefix: closest
    distribution: closest
}

address {
    prefix: multicast
    distribution: multicast
}

address {
    prefix: unicast
    distribution: closest
}

address {
    prefix: exclusive
    distribution: closest
}

address {
    prefix: broadcast
    distribution: multicast
}
